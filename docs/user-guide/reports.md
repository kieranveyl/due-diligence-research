# Reports Management Guide

This guide covers comprehensive management of research reports generated by the Due Diligence CLI, including viewing, organizing, exporting, and maintaining your research archive.

## 📊 Understanding Reports

### Report Structure

Each Due Diligence report contains:

**Executive Summary**
- Overall confidence assessment
- Key risk indicators
- Recommendation summary
- Research scope coverage

**Detailed Analysis**
- Findings from each research agent
- Supporting evidence and citations
- Confidence scores per section
- Cross-verification results

**Metadata**
- Research parameters used
- Timestamp and duration
- Sources consulted
- Session information

### Report Formats

| Format | Extension | Best For |
|--------|-----------|----------|
| **Markdown** | `.md` | Reading, editing, version control |
| **JSON** | `.json` | Programmatic processing, data analysis |
| **PDF** | `.pdf` | Presentations, formal documents |

## 📋 Listing Reports

### Basic Report Listing

```bash
# List reports in default directory
dd reports list
```

**Output Example:**
```
📊 Reports in ./reports
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━┓
┃ Name                            ┃ Size     ┃ Modified        ┃ Format   ┃
┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━┩
│ tesla-inc-20240315-143022.md    │ 45.3 KB  │ 2024-03-15 14:30│ MD       │
│ apple-inc-20240315-120045.md    │ 52.1 KB  │ 2024-03-15 12:00│ MD       │
│ microsoft-corp-analysis.json    │ 38.7 KB  │ 2024-03-14 16:45│ JSON     │
└─────────────────────────────────┴──────────┴─────────────────┴──────────┘
```

### Advanced Listing Options

```bash
# List reports in specific directory
dd reports list --dir ./investment-research

# Show more reports
dd reports list --limit 50

# List reports from custom location
dd reports list --dir /path/to/reports
```

### Report Naming Conventions

The CLI automatically generates meaningful report names:

**Default Pattern:**
- `{entity-name}-{date}-{time}.{format}`
- Example: `tesla-inc-20240315-143022.md`

**Custom Names:**
- Use `--output` flag during research
- Example: `dd research "Tesla Inc" --output "./reports/tesla-q1-analysis.md"`

## 👀 Viewing Reports

### View Full Report

```bash
# View complete report
dd reports show tesla-inc-20240315-143022.md
```

**For Markdown reports**, this provides:
- Formatted display with proper styling
- Syntax highlighting for code blocks
- Structured table rendering

### View Report Preview

```bash
# Show first 50 lines
dd reports show tesla-inc-20240315-143022.md --lines 50

# Show first 20 lines for quick preview
dd reports show tesla-inc-20240315-143022.md --lines 20
```

### View by Session ID

```bash
# View report using session ID instead of filename
dd reports show abc12345
```

This automatically finds the report associated with the session.

### View from Different Directory

```bash
# View report from custom location
dd reports show tesla-analysis.md --dir ./investment-research
```

## 🔄 Report Export and Conversion

### Export to PDF

```bash
# Export to PDF for presentations
dd reports export tesla-inc-20240315-143022.md --format pdf

# Export with custom output path
dd reports export tesla-inc-20240315-143022.md \
  --format pdf \
  --output ./presentations/tesla-analysis.pdf
```

### Export to JSON

```bash
# Export to JSON for data processing
dd reports export tesla-inc-20240315-143022.md --format json

# Export to structured data file
dd reports export tesla-inc-20240315-143022.md \
  --format json \
  --output ./data/tesla-structured.json
```

### Batch Export

```bash
# Export all reports in directory to PDF
for report in ./reports/*.md; do
    dd reports export "$report" --format pdf
done

# Export recent reports to JSON
dd reports list --limit 10 | tail -n +4 | while read name size modified format; do
    if [[ "$format" == "MD" ]]; then
        dd reports export "$name" --format json
    fi
done
```

## 📁 Report Organization

### Directory Structure

**Recommended Organization:**

```
./due-diligence/
├── daily-research/
│   ├── 2024-03-15/
│   ├── 2024-03-14/
│   └── 2024-03-13/
├── investment-analysis/
│   ├── tech-sector/
│   ├── healthcare/
│   └── energy/
├── compliance-reports/
├── archived/
└── exports/
    ├── pdf/
    └── json/
```

### Moving Reports

```bash
# Move report to organized location
mv ./reports/tesla-inc-20240315-143022.md ./investment-analysis/tech-sector/

# Batch move by pattern
mv ./reports/*apple* ./investment-analysis/tech-sector/
mv ./reports/*pharma* ./investment-analysis/healthcare/
```

### Archiving Old Reports

```bash
# Archive reports older than 30 days
find ./reports -name "*.md" -mtime +30 -exec mv {} ./archived/ \;

# Compress archived reports
cd ./archived && tar -czf "reports-$(date +%Y%m).tar.gz" *.md && rm *.md
```

## 🧹 Report Cleanup

### Automated Cleanup

```bash
# Preview what will be deleted (dry run)
dd reports cleanup --dry-run

# Clean up reports older than 30 days
dd reports cleanup --older-than 30

# Clean up without confirmation
dd reports cleanup --older-than 60 --yes
```

### Custom Cleanup

```bash
# Clean up specific directory
dd reports cleanup --dir ./temporary-research --older-than 7

# Clean up with different age threshold
dd reports cleanup --older-than 90  # 3 months
```

### Selective Cleanup

```bash
# Keep important reports, clean others
mkdir -p ./important
mv ./reports/*critical* ./important/
mv ./reports/*acquisition* ./important/
dd reports cleanup --older-than 14
mv ./important/* ./reports/
```

## 📈 Report Analytics

### Summary Statistics

```bash
# Show overall statistics
dd reports summary
```

**Example Output:**
```
📈 Reports Summary
📊 Total Reports: 47
💾 Total Size: 2.3 MB
📁 Directory: ./reports

By Format
┏━━━━━━━━━━┳━━━━━━━━━┓
┃ Format   ┃ Count   ┃
┡━━━━━━━━━━╇━━━━━━━━━┩
│ MD       │ 35      │
│ JSON     │ 10      │
│ PDF      │ 2       │
└──────────┴─────────┘

By Age
┏━━━━━━━━━━━━━━━━━━┳━━━━━━━━━┓
┃ Period           ┃ Count   ┃
┡━━━━━━━━━━━━━━━━━━╇━━━━━━━━━┩
│ Last 7 days      │ 12      │
│ Last 30 days     │ 23      │
│ Older than 30    │ 12      │
└──────────────────┴─────────┘
```

### Directory-Specific Summary

```bash
# Summary for specific research area
dd reports summary --dir ./investment-analysis

# Summary for archived reports
dd reports summary --dir ./archived
```

## 🔍 Advanced Report Management

### Search and Filter

```bash
# Find reports by entity name
find ./reports -name "*tesla*" -type f

# Find reports by date
find ./reports -name "*2024-03-15*" -type f

# Find large reports (over 50KB)
find ./reports -size +50k -type f

# Find JSON reports only
find ./reports -name "*.json" -type f
```

### Report Validation

```bash
# Check report integrity
for report in ./reports/*.md; do
    if [ -s "$report" ]; then
        echo "✅ $report - OK"
    else
        echo "❌ $report - Empty or corrupted"
    fi
done

# Validate JSON reports
for report in ./reports/*.json; do
    if python3 -m json.tool "$report" > /dev/null 2>&1; then
        echo "✅ $report - Valid JSON"
    else
        echo "❌ $report - Invalid JSON"
    fi
done
```

### Backup and Sync

```bash
# Create timestamped backup
tar -czf "reports-backup-$(date +%Y%m%d).tar.gz" ./reports/

# Sync to cloud storage (example with rsync)
rsync -av ./reports/ user@server:/backup/due-diligence/

# Sync to cloud service (example with rclone)
rclone sync ./reports/ mydrive:due-diligence/reports/
```

## 📊 Report Processing Scripts

### Generate Report Index

```bash
#!/bin/bash
# generate-index.sh

OUTPUT="report-index.md"
echo "# Due Diligence Reports Index" > "$OUTPUT"
echo "" >> "$OUTPUT"
echo "Generated on: $(date)" >> "$OUTPUT"
echo "" >> "$OUTPUT"

for report in ./reports/*.md; do
    if [ -f "$report" ]; then
        basename=$(basename "$report")
        size=$(stat -f%z "$report" 2>/dev/null || stat -c%s "$report")
        echo "- [$basename](./$basename) ($(numfmt --to=iec $size))" >> "$OUTPUT"
    fi
done

echo "Report index generated: $OUTPUT"
```

### Extract Key Findings

```bash
#!/bin/bash
# extract-findings.sh

ENTITY="$1"
OUTPUT="findings-$(echo "$ENTITY" | tr ' ' '-' | tr '[:upper:]' '[:lower:]').txt"

echo "Key Findings for: $ENTITY" > "$OUTPUT"
echo "Extracted on: $(date)" >> "$OUTPUT"
echo "=================================" >> "$OUTPUT"

for report in ./reports/*$(echo "$ENTITY" | tr ' ' '-')*; do
    if [ -f "$report" ]; then
        echo "" >> "$OUTPUT"
        echo "From: $(basename "$report")" >> "$OUTPUT"
        echo "---" >> "$OUTPUT"

        # Extract executive summary section
        sed -n '/## Executive Summary/,/## /p' "$report" | head -n -1 >> "$OUTPUT"
    fi
done

echo "Key findings extracted: $OUTPUT"
```

### Generate Comparison Report

```bash
#!/bin/bash
# compare-entities.sh

ENTITY1="$1"
ENTITY2="$2"
OUTPUT="comparison-$(date +%Y%m%d).md"

echo "# Entity Comparison: $ENTITY1 vs $ENTITY2" > "$OUTPUT"
echo "" >> "$OUTPUT"

for entity in "$ENTITY1" "$ENTITY2"; do
    echo "## $entity" >> "$OUTPUT"

    # Find most recent report for entity
    report=$(ls -t ./reports/*$(echo "$entity" | tr ' ' '-')* 2>/dev/null | head -1)

    if [ -f "$report" ]; then
        echo "Source: $(basename "$report")" >> "$OUTPUT"
        sed -n '/## Executive Summary/,/## /p' "$report" | head -n -1 >> "$OUTPUT"
    else
        echo "No report found for $entity" >> "$OUTPUT"
    fi

    echo "" >> "$OUTPUT"
done

echo "Comparison report generated: $OUTPUT"
```

## 🚀 Integration Examples

### CI/CD Pipeline Integration

```yaml
# .github/workflows/due-diligence.yml
name: Due Diligence Reports

on:
  schedule:
    - cron: '0 9 * * 1-5'  # Weekdays at 9 AM

jobs:
  research:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install CLI
        run: pip install due-diligence-exa

      - name: Research Watchlist
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          EXA_API_KEY: ${{ secrets.EXA_API_KEY }}
        run: |
          while IFS= read -r entity; do
            dd research "$entity" --no-interactive --scope financial
          done < watchlist.txt

      - name: Upload Reports
        uses: actions/upload-artifact@v3
        with:
          name: due-diligence-reports
          path: ./reports/
```

### Database Integration

```python
#!/usr/bin/env python3
# import-reports.py

import json
import sqlite3
from pathlib import Path
from datetime import datetime

def import_reports_to_db():
    """Import JSON reports to SQLite database"""

    conn = sqlite3.connect('due_diligence.db')

    # Create table
    conn.execute('''
        CREATE TABLE IF NOT EXISTS reports (
            id INTEGER PRIMARY KEY,
            entity_name TEXT,
            report_date TEXT,
            confidence_score REAL,
            findings TEXT,
            file_path TEXT
        )
    ''')

    # Import JSON reports
    for report_file in Path('./reports').glob('*.json'):
        with open(report_file) as f:
            data = json.load(f)

        conn.execute('''
            INSERT INTO reports
            (entity_name, report_date, confidence_score, findings, file_path)
            VALUES (?, ?, ?, ?, ?)
        ''', (
            data.get('entity_name'),
            data.get('created_at'),
            data.get('overall_confidence'),
            json.dumps(data.get('findings')),
            str(report_file)
        ))

    conn.commit()
    conn.close()
    print("Reports imported to database")

if __name__ == '__main__':
    import_reports_to_db()
```

## 🔗 Related Documentation

- **[Getting Started](./getting-started.md)** - Basic report generation
- **[Research Guide](./research-guide.md)** - Conducting research that generates reports
- **[CLI Reference](./cli-reference.md)** - Complete reports command reference
- **[Examples](../examples/quick-start.md)** - Report management examples